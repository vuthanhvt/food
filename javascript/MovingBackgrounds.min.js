var __extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},MB;!function(a){var b="./style/mb_icon/",c=function(){function a(){}return a.random=function(a,b,c){return b=b||0,parseFloat((Math.random()*((a||1)-b)+b).toFixed(void 0===c?2:c))},a.randomPlusMinus=function(){return Math.random()>.5?-1:1},a.extend=function(a,b,c){for(var d in b)a[d]=c[d]?c[d]:b[d];return a},a.parseColor=function(b){if("string"==typeof b){b=b.trim().toLowerCase();var c;if(c=a.COLOR_TABLE[b])return"rgba("+c[0]+","+c[1]+","+c[2]+",";var d,e,f;if("#"===b[0])return 4===b.length?(d=parseInt(b[1]+b[1],16),e=parseInt(b[2]+b[2],16),f=parseInt(b[3]+b[3],16)):(d=parseInt(b.substr(1,2),16),e=parseInt(b.substr(3,2),16),f=parseInt(b.substr(5,2),16)),"rgba("+d+","+e+","+f+",";var g;if(g=b.match(/([\d\-\.e]+)/gi))return"rgba("+ +g[0]+","+ +g[1]+","+ +g[2]+","}return"rgba(255,255,255,"},a.createElement=function(a,b,c){var d=document.createElement(a);b&&(d.className="mb--"+b);var e=d.style;for(var f in c)e[f]=c[f];return d},a.COLOR_TABLE={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],fuchsia:[255,0,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],grey:[128,128,128],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[0,0,0,0]},a}();a.Util=c;var d=function(){function a(a,b){this.callback=a,this.context=b,this.destroyed=!1,this.animate()}return a.prototype.animate=function(){var b=this;this.destroyed||(this.callback.call(this.context),a.raf.apply(window,[function(){b.animate()}]))},a.prototype.destroy=function(){this.destroyed=!0,this.callback=void 0,this.context=void 0},a.raf=function(a){setTimeout(a,1e3/60)},a}();a.Animate=d;var e=function(){function a(a,b,d){"undefined"==typeof b&&(b={}),"undefined"==typeof d&&(d={});var e=this;this.container=a,this.removeFlag="",this.options=c.extend({},d,b),window.addEventListener("resize",this.eventListener=function(){e.resize()})}return a.prototype.destroy=function(){for(var a=this.container,b=a.querySelectorAll(this.removeFlag),c=0;c<b.length;c++)a.removeChild(b[c]);window.removeEventListener("resize",this.eventListener),this.container=void 0},a.prototype.resize=function(){},a}();a.Base=e;var f=function(a){function b(b,c,d){a.call(this,b,c,d);for(var e=this.options.num,f=this.template(),g=0;e>g;g++)b.appendChild(this.style(f.cloneNode(!0),g,e))}return __extends(b,a),b.prototype.style=function(a){return a},b.prototype.template=function(){return document.createElement("div")},b}(e);a.CSSAnimationBase=f;var g=function(a){function b(b,c,d){a.call(this,b,c,d),this.removeFlag=".mb--canvas"}return __extends(b,a),b.prototype.resize=function(){var a=this.canvas,b=this.container;this.width=a.width=b.offsetWidth,this.height=a.height=b.offsetHeight},b.prototype.destroy=function(){a.prototype.destroy.call(this),this.canvas=null},b}(e);a.CanvasBase=g;var h=function(a){function b(c,d){a.call(this,c,d,b.options),this.removeFlag=".mb--meteor"}return __extends(b,a),b.prototype.style=function(a){var b=a.style;return b.left=c.random(150)+"%",b.opacity=c.random(1,.5),b.webkitAnimation=b.animation="mbMeteorFlow "+(c.random(5)+5)+"s "+c.random(100)+"s linear infinite",a},b.prototype.template=function(){var a=c.createElement,b=a("div","meteor"),d=a("div","star-five"),e=a("div","star-five1"),f=a("div","star-five2"),g=a("div","star-five3");return d.appendChild(e),d.appendChild(f),d.appendChild(g),b.appendChild(d),b},b.options={num:100},b}(f);a.Meteor=h;var i=function(a){function c(d,e){a.call(this,d,e,c.options),this.circles=[],this.clouds=[];var f=this.options,g=this.width=d.offsetWidth,h=this.height=d.offsetHeight,i=this.canvas=document.createElement("canvas");i.width=g,i.height=h,i.className="mb--rain-drop mb--canvas",d.appendChild(i),this.context=i.getContext("2d");for(var j,k,l,m,n=f.rainDrops,o=f.direction,p=f.wind,q=this.circles,r=0;n>r;r++)j=Math.round(Math.random()*g*2*p),"right"===o?j-=g:"left"!==o&&(f.wind=0,j=Math.round(Math.random()*g*p+1)),k=-1*Math.round(Math.random()*h*2+50),l=5+2*Math.random(),m=Math.floor(10*Math.random()+1),q.push({opacity:parseFloat((-.03+m/10).toFixed(2)),speed:l,xPos:j,yPos:k,counter:0});for(var r=0;20>r;r++)this.clouds.push(this.newCloud());var s=this.img=new Image,t=this.imgCanvas=document.createElement("canvas");s.onload=function(){s.onload=null,t.width=s.width,t.height=s.height,t.getContext("2d").drawImage(s,0,0)},s.src=b+"c2.png",this.render()}return __extends(c,a),c.prototype.render=function(){this.animate=new d(this.drawRain,this)},c.prototype.newCloud=function(){return{x:2*Math.random()*this.width-this.width/2,dx:(Math.random()>.5?-1:1)*Math.random()/10,y:Math.random()*this.height-this.height,dy:(Math.random()>.5?-1:1)*Math.random()/10,s:2*Math.random()+1,ds:Math.random()/10,o:1,"do":Math.random()/100}},c.prototype.drawRain=function(){var a,b=this.circles,c=this.options,d=this.width,e=this.height,f=Math.max(c.wind,1),g=c.direction,h=this.context,i="left"===g,j="right"===g;i||j||(f=0),h.clearRect(0,0,d,e);for(var k,l=this.clouds,m=0;m<l.length;m++){k=l[m];var n=k.y+=k.dy,o=k.x+=k.dx,p=k.s+=k.ds,q=k.o-=k["do"];0>=q&&(l[m]=this.newCloud());var r=this.img.width,s=this.img.height,t=r*p,u=s*p;h.globalAlpha=0>q?Math.random()>.99?.5*Math.random():0:.05*q,h.drawImage(this.imgCanvas,0,0,r||1,s||1,o-t/2,n,t||1,u||1)}h.globalAlpha=1;for(var m=0;m<b.length;m++)a=b[m],a.counter+=a.speed,a.yPos+a.counter>e&&(a.xPos=Math.round(Math.random()*d*2*f),j?a.xPos-=d:i||(a.xPos=Math.round(Math.random()*d+10)),a.yPos=-1*Math.round(Math.random()*e*2+1),a.counter=0),h.beginPath(),i?this.moveParticules(a,-1,7,10,11,5):j?this.moveParticules(a,1,7,10,11,5):this.moveParticules(a,1,0,15,3,20),h.fillStyle="rgba(220, 220, 220,"+a.opacity+")",h.fill()},c.prototype.moveParticules=function(a,b,c,d,e,f){var g=this.options,h=g.wind,i=this.context,j=a.xPos,k=a.yPos,l=a.counter;i.moveTo(j+l*h*b,k+l),i.bezierCurveTo(j+l*h*b+c*b,k+l+d,j+l*h*b+e*b,k+l+f,j+l*h*b,k+l)},c.prototype.destroy=function(){a.prototype.destroy.call(this),this.animate.destroy(),this.animate=void 0,this.context=void 0,this.circles=void 0},c.options={direction:"vertical",wind:1,rainDrops:1e3},c}(g);a.RainDrop=i;var j=function(a){function b(c,d){a.call(this,c,d,b.options),this.removeFlag=".mb--blink-star"}return __extends(b,a),b.prototype.template=function(){var a=c.createElement,b=a("div","blink-star"),d=a("div","blink-star-child");return b.appendChild(d),b},b.prototype.style=function(a){var d=a.style;return a.className+=" mb--blink-star-"+b.colors[Math.floor(Math.random()*b.colors.length)],d.top=c.random(100)+"%",d.left=c.random(100)+"%",d.width=c.random(2)+8+"px",d.height=c.random(2)+7+"px",d.opacity=c.random(5)/10+.5,d.webkitAnimation=d.animation="mbBlinkAfter 15s infinite "+c.random(10)+"s ease-out",a},b.colors=["navy","blue","aqua","teal","olive","green","lime","yellow","orange","red","maroon","fuchsia","purple"],b.options={num:200},b}(f);a.BlinkStar=j;var k=function(a){function b(c,d){a.call(this,c,d,b.options),this.removeFlag=".mb--leave"}return __extends(b,a),b.prototype.template=function(){return c.createElement("div","leave")},b.prototype.style=function(a,b,d){var e=c.random(10+d/10)+"s",f=c.random(5)+8;a.className+=" mb--leave-"+this.options.type;var g=a.style;g.left=c.random(150)-40+"%",g.webkitAnimation=g.animation="mbFalling "+f+"s infinite "+e+" linear",g.webkitTransform=g.transform="scale("+(c.random(.5)+.3)+")rotate("+c.random(360)+"deg)";var h=c.createElement("div","leave-bg-"+(~~(3*Math.random())+1));return h.style.webkitAnimation=h.style.animation=(Math.random()>.3?"mbSwayAndFlip ":"mbSway ")+(c.random(3)+3)+"s infinite "+e+" alternate ease-in-out",a.appendChild(h),a},b.options={num:50,type:1},b}(f);a.Leaves=k;var l=function(a){function b(b){a.call(this,b,{type:1})}return __extends(b,a),b}(k);a.Leaves01=l;var m=function(a){function b(b){a.call(this,b,{type:2})}return __extends(b,a),b}(k);a.Leaves02=m;var n=function(a){function b(b){a.call(this,b,{type:3})}return __extends(b,a),b}(k);a.Leaves03=n;var o=function(a){function b(b){a.call(this,b,{type:4})}return __extends(b,a),b}(k);a.Leaves04=o;var p=function(a){function b(b){a.call(this,b,{type:5})}return __extends(b,a),b}(k);a.Leaves05=p;var q=function(a){function b(b,d){a.call(this,b,d),this.removeFlag=".mb--an-bubble";for(var e,f=0;10>f;f++)e=document.createElement("div"),e.className="mb--an-bubble",e.id="mb--an-bubble-"+(f+1),e.style.webkitAnimation=e.style.animation="mbAnBubbleMove "+(c.random(20)+10)+"s infinite "+c.random()+"s alternate linear",b.appendChild(e)}return __extends(b,a),b}(e);a.AnBubble=q;var r=function(a){function e(c,d){var f=this;a.call(this,c,d,e.options),this.imgLoaded=!1,this.removeFlag=".mb--canvas";var g=this.canvas=document.createElement("canvas");if(g.className="mb--snow mb--canvas",g.width=this.width=c.offsetWidth,g.height=this.height=c.offsetHeight,c.appendChild(g),this.context=g.getContext("2d"),this.context){var h=this.img=new Image;h.onload=function(){f.imgLoaded=!0,f.createSnowDate()},h.src=b+"snow.png",this.render()}}return __extends(e,a),e.prototype.getScale=function(a){var b,c=Math.random(),d=Math.random();return b=d>.92?5*c+1:d>.9?3*c+.8:d>.7?c+.6:c/2+.3,a||(d>.99?b=15*c+5:d>.97&&(b=8*c+3)),b},e.prototype.createSnowDate=function(){for(var a,b=this.snows=[],d=this.options.num,e=this.img,f=this.img.width,g=this.img.height,h=0;d>h;h++)a=this.getScale(!0),b.push({x:Math.random()*this.width,xi:c.randomPlusMinus()*a*.2,y:Math.random()*this.height,yi:.5*a,w:f*a,h:g*a});var i=this.snowCanvas=document.createElement("canvas");i.width=f,i.height=g,i.getContext("2d").drawImage(e,0,0)},e.prototype.render=function(){var a=this;this.animate=new d(function(){if(a.imgLoaded){var b,d,e=a.context,f=a.snows,g=a.options.num,h=a.width,i=a.height,j=a.img,k=j.width,l=j.height;e.clearRect(0,0,h,i);for(var m=0;g>m;m++)b=f[m],e.drawImage(a.snowCanvas,b.x,b.y,b.w,b.h),b.x+=b.xi,b.y+=b.yi,b.y>i+b.h&&(b.y=-b.h,d=a.getScale(),b.w=k*d,b.h=l*d,b.xi=c.randomPlusMinus()*d*.2,b.yi=.5*d),b.x>h+b.w?b.x=-b.w:b.x<-b.w&&(b.x=h+b.w)}},this)},e.prototype.destroy=function(){a.prototype.destroy.call(this),this.animate.destroy(),this.img.onload=null,this.img=null,this.context=null},e.options={num:500},e}(g);a.Snow=r;var s=function(a){function b(c,d){a.call(this,c,d,b.options),this.particles=[],this.updateParticles=function(){for(var a=this.particles.length;a--;){var b=this.particles[a],c=b.angle*Math.PI/180,d=Math.cos(c)*b.speed,e=Math.sin(c)*b.speed;b.speed*=b.friction,b.coordLast[2].x=b.coordLast[1].x,b.coordLast[2].y=b.coordLast[1].y,b.coordLast[1].x=b.coordLast[0].x,b.coordLast[1].y=b.coordLast[0].y,b.coordLast[0].x=b.x,b.coordLast[0].y=b.y,b.x+=d,b.y+=e,b.y+=b.gravity,b.angle+=b.wind,b.alpha-=b.decay,(!this.removable(0,0,this.width,this.height,b.x-b.radius,b.y-b.radius,2*b.radius,2*b.radius)||b.alpha<.05)&&this.particles.splice(a,1)}},this.fireworks=[];var e=this.canvas=document.createElement("canvas");e.width=this.width=c.offsetWidth,e.height=this.height=c.offsetHeight,c.appendChild(e),this.context=e.getContext("2d"),this.refreshCanvas()}return __extends(b,a),b.prototype.removable=function(a,b,c,d,e,f,g,h){return!(e>a+c||a>e+g||f>b+d||b>f+h)},b.prototype.createParticles=function(a,b,d){for(var e=this.options,f=c.random,g=e.num,h=e.speed,i=e.speedVariance,j=e.gravity,k=e.hueVariance,l=e.friction,m=e.wind,n=e.lineWidth;g--;)this.particles.push({x:a,y:b,coordLast:[{x:a,y:b},{x:a,y:b},{x:a,y:b}],angle:f(0,360),speed:f(0>=h-i?1:-i,h+i),friction:1-l/100,gravity:j/2,hue:f(d-k,d+k),brightness:f(50,80),alpha:f(40,100)/100,decay:f(10,50)/1e3,wind:(f(0,m)-m/2)/25,lineWidth:n})},b.prototype.drawParticles=function(){for(var a,b,a,d=this.particles,e=c.random,f=this.context,g=this.options,h=d.length,i=g.flickerDensity,j=50-i,k=e(50,100)/100;h--;)a=d[h],f.beginPath(),b=~~(e(1,3)-1),f.moveTo(Math.round(a.coordLast[b].x),Math.round(a.coordLast[b].y)),f.lineTo(Math.round(a.x),Math.round(a.y)),f.closePath(),f.strokeStyle="hsla("+a.hue+", 100%, "+a.brightness+"%, "+a.alpha+")",f.stroke(),i>0&&e(0,j)===j&&(f.beginPath(),f.arc(Math.round(a.x),Math.round(a.y),e(a.lineWidth,a.lineWidth+3)/2,0,2*Math.PI,!1),f.closePath(),f.fillStyle="hsla("+a.hue+", 100%, "+a.brightness+"%, "+k+")",f.fill())},b.prototype.createFireworks=function(a,b,d,e){var f=this.fireworks;if(!(f.length>8)){var g=this.options,h=c.random;f.push({x:a,y:b,startX:a,startY:b,hitX:!1,hitY:!1,coordLast:[{x:a,y:b},{x:a,y:b},{x:a,y:b}],targetX:d,targetY:e,speed:g.fworkSpeed,angle:Math.atan2(e-b,d-a),shockwaveAngle:Math.atan2(e-b,d-a)+90*(Math.PI/180),acceleration:g.fworkAccel/100,hue:g.currentHue,brightness:h(50,80),alpha:h(50,100)/100,lineWidth:g.lineWidth})}},b.prototype.updateFireworks=function(){for(var a=this.fireworks,b=a.length,c=this.context;b--;){var d=a[b];c.lineWidth=d.lineWidth;var e=Math.cos(d.angle)*d.speed,f=Math.sin(d.angle)*d.speed;d.speed*=1+d.acceleration,d.coordLast[2].x=d.coordLast[1].x,d.coordLast[2].y=d.coordLast[1].y,d.coordLast[1].x=d.coordLast[0].x,d.coordLast[1].y=d.coordLast[0].y,d.coordLast[0].x=d.x,d.coordLast[0].y=d.y,d.startX>=d.targetX?d.x+e<=d.targetX?(d.x=d.targetX,d.hitX=!0):d.x+=e:d.x+e>=d.targetX?(d.x=d.targetX,d.hitX=!0):d.x+=e,d.startY>=d.targetY?d.y+f<=d.targetY?(d.y=d.targetY,d.hitY=!0):d.y+=f:d.y+f>=d.targetY?(d.y=d.targetY,d.hitY=!0):d.y+=f,d.hitX&&d.hitY&&(this.createParticles(d.targetX,d.targetY,d.hue),this.fireworks.splice(b,1))}},b.prototype.drawFireworks=function(){var a,b,d=this.fireworks,e=this.context,f=c.random,g=d.length;for(e.globalCompositeOperation="lighter";g--;)b=d[g],e.lineWidth=b.lineWidth,a=~~(f(1,3)-1),e.beginPath(),e.moveTo(Math.round(b.coordLast[a].x),Math.round(b.coordLast[a].y)),e.lineTo(Math.round(b.x),Math.round(b.y)),e.closePath(),e.strokeStyle="hsla("+b.hue+", 100%, "+b.brightness+"%, "+b.alpha+")",e.stroke()},b.prototype.refreshCanvas=function(){var a=this;this.animate=new d(function(){var b=Math.random();if(b>.5&&.54>b){var d=c.random,e=d(a.width),f=a.options;f.currentHue=~~d(f.hueMin,f.hueMax),a.createFireworks(e,a.height,d(e,e+100*c.randomPlusMinus()),150+100*Math.random())}var g=a.context;g.globalCompositeOperation="destination-out",g.fillStyle="rgba(0,0,0,0.25)",g.fillRect(0,0,a.width,a.height),a.updateFireworks(),a.updateParticles(),a.drawFireworks(),a.drawParticles()},this)},b.prototype.destroy=function(){a.prototype.destroy.call(this),this.animate.destroy(),this.animate=null,this.context=null},b.options={currentHue:30,flickerDensity:25,friction:5,fworkAccel:10,fworkSpeed:4,gravity:1,hueMax:360,hueMin:0,hueVariance:30,lineWidth:1,num:150,speed:5,speedVariance:10,wind:50},b}(g);a.Firework1=s;var t=function(a){function e(c,d){var e=this;a.call(this,c,d),this.imgLoaded=!1,this.particles=[];var f=this.canvas=document.createElement("canvas");this.context=f.getContext("2d"),f.width=this.width=c.offsetWidth,f.height=this.height=c.offsetHeight,c.appendChild(f);var g=this.bigImg=new Image;g.onload=function(){g=g.onload=null,e.imgLoaded=!0,e.createFireworkPalette(12)},g.src=b+"bigFirework.png",this.render()}return __extends(e,a),e.prototype.createFireworkPalette=function(a){var b=10*a,c=this.fireworkCanvas=document.createElement("canvas"),d=c.getContext("2d");c.width=c.height=b;var e=document.createElement("canvas");e.width=e.height=a;for(var f=e.getContext("2d"),g=0;100>g;g++){f.clearRect(0,0,a,a),f.globalCompositeOperation="source-over",f.drawImage(this.bigImg,0,0),f.globalCompositeOperation="source-out",f.fillStyle="hsl("+Math.round(3.6*g)+",100%,60%)",f.fillRect(0,0,a,a);var h=g*a;d.drawImage(f.canvas,h%b,Math.floor(h/b)*a)}},e.prototype.render=function(){var a=this;this.animate=new d(function(){if(a.imgLoaded){var b=Math.random();b>.5&&.55>b&&a.createParticle(),a.draw()}},this)},e.prototype.destroy=function(){a.prototype.destroy.call(this),this.animate.destroy(),this.bigImg.onload=null,this.bigImg=null,this.context=null,this.fireworkCanvas=null,this.particles=null},e.prototype.draw=function(){var a=this.context,b=this.particles;a.globalCompositeOperation="destination-out",a.fillStyle="rgba(0,0,0,.2)",a.fillRect(0,0,this.width,this.height);for(var c=b.length;c--;){var d=b[c];d.update()?(b.splice(c,1),d.usePhysics||(Math.random()<.8?this.star(d):this.circle(d))):d.render(a,this.fireworkCanvas)}},e.prototype.createParticle=function(a,b,d,e,f){a=a||{},b=b||{},d=d||{};var g=150+100*Math.random(),h=3*Math.random()-1.5,i=12*Math.floor(100*Math.random()),j=c.random;this.particles.push(new u({x:a.x||j(this.width),y:(a.y||this.height+10)-2},{y:b.y||g},{x:d.x||h,y:d.y||0},e||i,f))},e.prototype.circle=function(a){for(var b=100,c=2*Math.PI/b;b--;){var d=4+4*Math.random(),e=b*c;this.createParticle(a.pos,null,{x:Math.cos(e)*d,y:Math.sin(e)*d},a.color,!0)}},e.prototype.star=function(a){var b=6+Math.round(15*Math.random()),c=3+Math.round(7*Math.random()),d=10,e=80,f=-(3*Math.random()-6),g=0,h=0,i=2*Math.PI,j=Math.random()*i;do{g=h,h=(h+c)%b;for(var k=g/b*i-j,l=(g+c)/b*i-j,m={x:a.pos.x+Math.cos(k)*e,y:a.pos.y+Math.sin(k)*e},n={x:a.pos.x+Math.cos(l)*e,y:a.pos.y+Math.sin(l)*e},o={x:n.x-m.x,y:n.y-m.y,a:l-k},p=0;d>p;p++){var q=p/d,r=k+q*o.a;this.createParticle({x:m.x+q*o.x,y:m.y+q*o.y},null,{x:Math.cos(r)*f,y:Math.sin(r)*f},a.color,!0)}}while(0!==h)},e}(g);a.Firework2=t;var u=function(){function a(a,c,d,e,f){var g=this;this.imgLoaded=!1,this.GRAVITY=.06,this.alpha=1,this.easing=.02*Math.random(),this.fade=.1*Math.random(),this.gridX=e%120,this.gridY=12*Math.floor(e/120),this.color=e,this.pos={x:a.x||0,y:a.y||0},this.vel={x:d.x||0,y:d.y||0},this.lastPos={x:this.pos.x,y:this.pos.y},this.target={y:c.y||0},this.usePhysics=f||!1;var h=this.img=new Image;h.onload=function(){h=h.onload=null,g.imgLoaded=!0},h.src=b+"smallFirework.png"}return a.prototype.update=function(){if(this.lastPos.x=this.pos.x,this.lastPos.y=this.pos.y,this.usePhysics)this.vel.y+=this.GRAVITY,this.pos.y+=this.vel.y,this.alpha-=this.fade;else{var a=this.target.y-this.pos.y;this.pos.y+=a*(.03+this.easing),this.alpha=Math.min(a*a*5e-5,1)}return this.pos.x+=this.vel.x,this.alpha<.005},a.prototype.render=function(a,b){if(this.imgLoaded){var c=Math.round(this.pos.x),d=Math.round(this.pos.y);a.save(),a.globalCompositeOperation="lighter",a.globalAlpha=Math.random()*this.alpha,a.drawImage(b,this.gridX,this.gridY,12,12,c-6,d-6,12,12),a.drawImage(this.img,c-3,d-3),a.restore()}},a}(),v=function(a){function c(c,e){var f=this;a.call(this,c,e),this.imgLoaded=!1,this.canvasWidth=512,this.canvasHeight=256,this.dataArray=[],this.count=0,this.lastTime=0,this.duration=4e3,this.variance={speed:3,ls:0,x:0,lx:0,y:0,ly:0,rotate:0,lr:0};var g=(this.width=c.offsetWidth,this.height=c.offsetHeight,this.canvas=document.createElement("canvas")),h=g.width=this.canvasWidth,i=g.height=this.canvasHeight;g.style.width=h+"px",g.style.height=i+"px",g.style.webkitTransformOrigin=g.style.transformOrigin="0 0",g.className="mb--canvas",this.resize(),c.appendChild(g),this.context=g.getContext("2d");var j=this.img=new Image;j.onload=function(){j=j.onload=null,f.imgLoaded=!0,f.createData()},j.src=b+"fog.png";var k=g.cloneNode(!1);this.fogContext=k.getContext("2d"),this.animate=new d(this.render,this)}return __extends(c,a),c.prototype.resize=function(){var a,b=this.width=this.container.offsetWidth,c=this.height=this.container.offsetHeight,d=this.canvasWidth,e=this.canvasHeight,f=0,g=0,h=b/d,i=c/e;h>i?(a=h,g=(c-a*e)/2):(a=i,f=(b-a*d)/2),this.canvas.style.webkitTransform=this.canvas.style.transform="translate("+f+"px, "+g+"px)scale("+a+")"},c.prototype.drawFog=function(a,b,c){if(this.imgLoaded){var d=this.fogContext,e=this.canvasWidth,f=this.canvasHeight;d.clearRect(0,0,e,f);for(var g,h=e>>1,i=f>>1,j=this.dataArray,k=0;k<j.length;k++){g=j[k];var l=(500+g.z)/500,m=1>=l?l:1.2-l/2;if(0>m){if(++this.count<1e11){g=j[k]=this.newData();var l=(500+g.z)/500,m=1>=l?l:1.2-l/2}}else{d.globalAlpha=g.a*m/2;var n=~~(this.img.width*l),o=~~(this.img.height*l);if(g.z+=g.v*a,g.x+=b,g.y+=c,!(2>n||2>o)){var p=-1500/(-1500+g.z),q=n>>1,r=o>>1,s=p*g.x+h-q,t=p*g.y+i-r;s>=e-q||-q>s||t>=f-r||-r>t||d.drawImage(this.imgCanvas,0,0,this.img.width,this.img.height,s,t,n,o)}}}}},c.prototype.newData=function(){var a=20,b=this.canvasWidth;return{x:Math.round(Math.random()*b)-(b>>1),y:Math.round(Math.random()*a)-(a>>1),z:-500,v:5*Math.random()+5,a:.2*Math.random()+.8}},c.prototype.createData=function(){var a=this.img,b=this.imgCanvas=document.createElement("canvas");b.getContext("2d").drawImage(a,0,0);for(var c=0;40>c;c++)this.dataArray.push(this.newData());for(c=0;100>c;c++)this.drawFog(3,0,0)},c.prototype.quad=function(a,b,c,d,e){return(b/=e/2)<1?d/2*b*b+c:-d/2*(--b*(b-2)-1)+c},c.prototype.render=function(){var a=this.context,b=this.canvasWidth,c=this.canvasHeight;a.save(),a.globalCompositeOperation="source-over",a.globalAlpha=.5,a.fillStyle="rgba(0,0,0,.05)",a.fillRect(0,0,b,c);var d=(new Date).getTime(),e=d-this.lastTime,f=this.duration,g=this.variance;e>f&&(this.lastTime=d,g.ls=g.speed,g.speed=3*Math.random()+2,g.lx=g.x,g.x=4*Math.random()-2,g.ly=g.y,g.y=.625*Math.random()-.25,g.lr=g.rotate,g.rotate=.4*Math.random()-.2,e=0);var h=this.quad;this.drawFog(h(0,e,g.ls,g.speed-g.ls,f),h(0,e,g.lx,g.x-g.lx,f),h(0,e,g.ly,g.y-g.ly,f));var i=h(0,e,g.lr,g.rotate-g.lr,f),j=1+Math.abs(i)/.2*.3,k=b>>1,l=c>>1;a.translate(k,l),a.scale(j,j),a.rotate(i),a.translate(-k,-l),a.drawImage(this.fogContext.canvas,0,0),a.restore()},c}(g);a.Fog=v;var w=function(a){function b(c,d){a.call(this,c,d,b.options),this.removeFlag=".mb--air-bubble"}return __extends(b,a),b.prototype.style=function(a){var b=~~(25*Math.random())+5,d=c.random;a.className+=" mb--air-bubble";var e=a.style;return e.left=d(100)+"%",e.height=e.width=b+"px",e.webkitAnimation=e.animation="mbBubbleRise "+(20-b/2)+"s "+d(10)+"s ease-in infinite",a},b.options={num:50},b}(f);a.AirBubble=w;var x=function(a){function b(c,d){a.call(this,c,d,b.options),this.draw(c)}return __extends(b,a),b.prototype.draw=function(a){var b=200,d=a.offsetWidth,e=a.offsetHeight,f=this.options,g=f.x,h=f.y,i=this.parseParam(g,d),j=this.parseParam(h,e),k=this.canvas;k||(k=this.canvas=document.createElement("canvas")),k.className=".mb--canvas";var l=this.maxRadius(d,e,i,j);k.width=k.height=l;var m=k.style;m.position="absolute",m.left=i-l/2+"px",m.top=j-l/2+"px",m.webkitAnimation=m.animation="mbSunshine 200s linear infinite";var n=k.getContext("2d"),o=l/2,p=o;n.clearRect(0,0,l,l);var q=Math.min,r=f.size,s=c.parseColor(f.color),t=n.createRadialGradient(o,p,0,o,p,p);t.addColorStop(0,s+"1)"),t.addColorStop(q(.03*r,1),s+"1)"),t.addColorStop(q(.05*r,1),s+"0.8)"),t.addColorStop(q(.1*r+.2,1),s+"0)"),n.fillStyle=t,n.fillRect(0,0,l,l);var u=this.canvas1;u&&a.removeChild(u),u=this.canvas1=k.cloneNode(!1),u.style.webkitAnimation=u.style.animation="mbSunshine 200s linear infinite reverse",a.appendChild(u),a.appendChild(k);var v=u.getContext("2d");v.clearRect(0,0,l,l);for(var w,x,y,z=[n,v],A=0;A<z.length;A++)for(w=z[A],x=1;b>=x;)y=~~(2*Math.random()),w.beginPath(),w.moveTo(o,p),w.arc(o,p,Math.sqrt(Math.pow(o,2)+Math.pow(p,2)),2/b*Math.PI*(x-1),2/b*Math.PI*(x+y),!1),w.lineTo(o,p),w.fillStyle=s+(.04*Math.random()+.01)+")",w.fill(),w.closePath(),x+=~~(10*Math.random())+y+2},b.prototype.resize=function(){this.draw(this.container)},b.prototype.destroy=function(){a.prototype.destroy.call(this),this.canvas1=null},b.prototype.parseParam=function(a,b){var c;return c="string"==typeof a&&a.indexOf("~")>=0?b-+a.split("~")[1]:+a},b.prototype.maxRadius=function(a,b,c,d){var e=Math.pow,f=Math.sqrt,g=e(a-c,2),h=e(b-d,2);return 2*Math.max(f(g+e(d,2)),f(e(c,2)+h),f(g+h))},b.options={x:"150",y:"50",size:2,color:"rgb(250,250,250)"},b}(g);a.Sunshine=x;var y=function(a){function b(c,d){a.call(this,c,d,b.options),this.removeFlag=".mb--cloud01"}return __extends(b,a),b.prototype.reset=function(a,b){b.removeEventListener("animationiteration",b.handler),b.handler=null;var c=this.options,d=c.direction,e=b.style;e.webkitAnimation=e.animation="none",e[d]="100%",setTimeout(function(){e.animation="mbCloudMove"+d+" "+(Math.random()*(10/c.speed)+10/c.speed)+"s linear infinite",b=null},0)},b.prototype._style=function(a,b,d){var e=this.options,f=e.direction,g=a.style,h=c.random(200)-100;a.className="mb--cloud01",g[f]=h+"%",g["top"===f||"bottom"===f?"left":"top"]=c.random(102)-10+"%",g.opacity=.5*Math.random()+.5,g.webkitAnimation=g.animation="mbCloudMove"+f+" "+(Math.random()*(10/e.speed)+10/e.speed)*(h+100)/200+"s linear infinite",g.msTransform=g.webkitTransform=g.transform="scale("+(.7/d*b+.3)+")"},b.prototype.style=function(a,b,c){var d=this;return this._style(a,b,c),a.addEventListener("animationiteration",a.handler=function(a){return function(b){d.reset(b,a)}}(a),!1),a},b.options={num:30,direction:"left",speed:.3},b}(f);a.Cloud01=y;var z=function(a){function b(b){a.call(this,b,{direction:"left"})}return __extends(b,a),b}(y);a.CloudsLeft01=z;var A=function(a){function b(b){a.call(this,b,{direction:"right"})}return __extends(b,a),b}(y);a.CloudsRight01=A;var B=function(a){function b(b){a.call(this,b,{direction:"top"})}return __extends(b,a),b}(y);a.CloudsTop01=B;var C=function(a){function b(b){a.call(this,b,{direction:"bottom"})}return __extends(b,a),b}(y);a.CloudsBottom01=C;var D=function(a){function b(b,c){a.call(this,b,c)}return __extends(b,a),b.prototype._style=function(a){var b=this.options,d=b.direction,e=a.style,f=c.random(200)-100;a.className="mb--cloud mb--cloud-c"+(~~(3*Math.random())+1),e[d]=f+"%",e["top"===d||"bottom"===d?"left":"top"]=c.random(102)-10+"%",e.opacity=.5*Math.random()+.5,e.webkitAnimation=e.animation="mbCloudMove"+d+" "+(Math.random()*(10/b.speed)+10/b.speed)*(f+100)/200+"s linear infinite";var g=c.random(1,.3);e.width=350*g+"px",e.height=130*g+"px"},b}(y);a.Cloud02=D;var E=function(a){function b(b){a.call(this,b,{direction:"left"})}return __extends(b,a),b}(D);a.CloudsLeft02=E;var F=function(a){function b(b){a.call(this,b,{direction:"right"})}return __extends(b,a),b}(D);a.CloudsRight02=F;var G=function(a){function b(b){a.call(this,b,{direction:"top"})}return __extends(b,a),b}(D);a.CloudsTop02=G;var H=function(a){function b(b){a.call(this,b,{direction:"bottom"})}return __extends(b,a),b}(D);a.CloudsBottom02=H;var I=function(){function a(a,b){this.sun=new x(a,b),this.cloud=new D(a,b)}return a.prototype.destroy=function(){this.sun.destroy(),this.cloud.destroy()},a}();a.SunCloud=I;var J=function(){function a(a,b){this.sun=new x(a,b),this.cloud=new y(a,b)}return a.prototype.destroy=function(){this.sun.destroy(),this.cloud.destroy()},a}();a.SunCloud01=J}(MB||(MB={}));